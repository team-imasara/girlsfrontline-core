'use strict';Object.defineProperty(exports,'__esModule',{value:!0});var _typeof2=require('babel-runtime/helpers/typeof'),_typeof3=_interopRequireDefault(_typeof2),_slicedToArray2=require('babel-runtime/helpers/slicedToArray'),_slicedToArray3=_interopRequireDefault(_slicedToArray2),_entries=require('babel-runtime/core-js/object/entries'),_entries2=_interopRequireDefault(_entries),_extends2=require('babel-runtime/helpers/extends'),_extends3=_interopRequireDefault(_extends2);exports.getSkillData=getSkillData,exports.getSkill=getSkill,exports.getDataPool=getDataPool,exports.getDesc=getDesc;var _skill=require('../../../data/skill.json'),_skill2=_interopRequireDefault(_skill);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getSkillData(skillData){if(skillData){var template=_skill2.default.find(function(_ref){var dataId=_ref.id;return dataId===skillData.id});return(0,_extends3.default)({},template,skillData)}}function getSkill(skill){var options=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},_options$level=options.level,level=_options$level===void 0?10:_options$level,_options$night=options.night,isNight=!(_options$night!==void 0)||_options$night,id=skill.id,path=skill.path,data=skill.data,name=skill.name,pool=skill.dataPool,nightPool=skill.nightDataPool,nightData=skill.night,dayDesc=skill.desc,dataPool=isNight?getDataPool((0,_extends3.default)({},pool,nightPool),level):getDataPool(pool,level),desc=isNight&&nightData?getDesc(nightData.desc,dataPool):getDesc(dayDesc,dataPool);return(0,_extends3.default)({id:id,path:path,data:data},isNight?nightData:{},{dataPool:dataPool,desc:desc,name:name})}function getDataPool(dataPool,level){var pool={};return(0,_entries2.default)(dataPool).forEach(function(_ref2){var _ref3=(0,_slicedToArray3.default)(_ref2,2),key=_ref3[0],values=_ref3[1],value='object'===('undefined'==typeof values?'undefined':(0,_typeof3.default)(values))?values[level-1]:values;pool[key]=value||values[values.length-1]}),pool}function getDesc(template,dataPool){var desc=template;return(0,_entries2.default)(dataPool).forEach(function(_ref4){var _ref5=(0,_slicedToArray3.default)(_ref4,2),key=_ref5[0],value=_ref5[1];desc=desc.replace(new RegExp('{'+key+'}','g'),value)}),desc}